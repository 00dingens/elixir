#!/bin/sh
readlink_f () {
  cd "$(dirname "$1")" > /dev/null
  local filename="$(basename "$1")"
  if [ -h "$filename" ]; then
    readlink_f "$(readlink "$filename")"
  else
    echo "`pwd -P`/$filename"
  fi
}

SELF=$(readlink_f "$0")
SCRIPT_PATH=$(dirname "$SELF")
ERL_OPTS=""

if [ "$1" = "iex" ]; then ERL_OPTS="-user Elixir-IEx-CLI -iex wait true"; fi
exec "$SCRIPT_PATH"/elixir --erl "$ERL_OPTS" -e "Mix.start; Mix.CLI.run" -- "$@"